{% extends "layout.html" %}

{% block content %}

<h2 class="title-card"><a href="{{ url_for('dash') }}">Dashboard</a> ->  <a href="{{ url_for('view_all_jobs') }}"> {{ title }} </a> -> {{ subtitle }} </h2>

<div class="title-card">

    <h3 class="title-card"> Job ID: {{ job.id }} - Header </h3>

    <table class="table table-striped table-card">
        <tr>
            <th>Customer</th>
            <th>Job Type</th>
            <th>Job Status</th>
            <th>Planned Date</th>
            <th>Invoice Status</th>
        </tr>
        <tr>
            <td>{{ job.customer_id }} - {{ customer.first_name }} {{ customer.last_name }}</td>
            <td>{{ job.job_type }}</td>
            <td>{{ job.job_status }}</td>
            <td>{{ job.job_planned_date.strftime('%d-%m-%Y')  }}</td>
            <td>{{ job.invoice_status }}</td>
        </tr>
    </table>
    
    <div class="title-card">
        <strong>Job Notes:</strong><br>
        {{ job.job_notes }}
    </div>

    <div>
        <a class="btn btn-default" href="{{ url_for('view_all_jobs') }}">&laquo; Back to Jobs</a>
        <a class="btn btn-primary" href="{{ url_for('edit_job', job_id=job.id) }} ">Edit Job &raquo;</a>
    </div>

</div>

<div class="title-card">
    <h3 class="title-card"> Items </h3>

    <table class="table table-striped table-card">
        <tr>
            <th>Item Name</th>
            <th>Item Description</th>
            <th>Item Quantity</th>
            <th>Item Cost</th>
            <th>Total Cost</th>
        </tr>
        {% for item in items %}
        <tr>
            <td>{{ item.item_name }}</td>
            <td>{{ item.item_description }}</td>
            <td>{{ item.item_quantity }}</td>
            <td>£{{ '%.2f'|format(item.item_cost) }}</td>
            <td>£{{ '%.2f'|format(item.item_total) }}</td>
        </tr>
        {% endfor %}
    </table>

    <div>
        <strong>Total Cost: £{{ '%.2f'|format(total_cost) }}</strong>
    </div>



</div>






{% endblock %}