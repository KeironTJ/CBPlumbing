{% extends "layout.html" %}
{% block content %}

<h2 class="title-card"><a href="{{ url_for('dash') }}">Dashboard</a> ->  <a href="{{ url_for('view_all_jobs') }}">Jobs</a> -> <a href="{{ url_for('edit_job', job_id=job_id) }}"> Edit Job </a> -> {{ subtitle }} </h2>

<div class="title-card">
    <h3 class="title-card"> Job ID: {{ job.id }} - Header</h3>

    <form style="margin-right: 10px;" action="" method="post" novalidate>
        {{ form.hidden_tag() }}
        <table class="table table-striped table-card">
            <tr>
                <th>{{ form.item_name.label }}</th>
                <th>{{ form.item_description.label }}</th>
                <th>{{ form.item_quantity.label }}</th>
                <th>{{ form.item_cost.label }}</th>
            </tr>
            <tr>
                <td>{{ form.item_name }}</td>
                <td>{{ form.item_description }}</td>
                <td>{{ form.item_quantity }}</td>
                <td>{{ form.item_cost }}</td>
            </tr>
            <tr>
                <td>{% for error in form.item_name.errors %}<span style="color: red;">[{{ error }}]</span>{% endfor %}</td>
                <td>{% for error in form.item_description.errors %}<span style="color: red;">[{{ error }}]</span>{% endfor %}</td>
                <td>{% for error in form.item_quantity.errors %}<span style="color: red;">[{{ error }}]</span>{% endfor %}</td>
                <td>{% for error in form.item_cost.errors %}<span style="color: red;">[{{ error }}]</span>{% endfor %}</td>
            </tr>
        </table>

        <p>
            {{ form.submit(class_="btn btn-primary") }}
            <button type="button" class="btn btn-danger" onclick="submitDeleteForm()">Delete</button>
        </p>        
    </form>
</div>

<script>
    function submitDeleteForm() {
        if (confirm('Are you sure you want to delete this item?')) {
            var form = document.createElement('form');
            form.method = 'POST';
            form.action = "{{ url_for('delete_job_item', item_id=item.id) }}";
            document.body.appendChild(form);
            form.submit();
        }
    }
</script>

{% endblock %}