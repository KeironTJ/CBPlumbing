{% extends "layout.html" %}
{% block content %}

<h2 class="title-card"><a href="{{ url_for('dash') }}">Dashboard</a> ->  <a href="{{ url_for('view_all_jobs') }}"> {{ title }} </a> -> {{ subtitle }} </h2>


<div class="title-card">
    <h3 class="title-card"> Job ID: {{ job.id }} - Header</h3>

    <div class="add-job-card">
        <form action="" method="post" novalidate>
            {{ form.hidden_tag() }}
            <table class="table table-striped table-card">
                <tr>
                    <th>{{ form.customer_id.label }}</th>
                    <th>{{ form.job_type.label }}</th>
                    <th>{{ form.job_status.label }}</th>
                    <th>{{ form.invoice_status.label }}</th>
                </tr>
                <tr>
                    <td>{{ form.customer_id }}</td>
                    <td>{{ form.job_type }}</td>
                    <td>{{ form.job_status }}</td>
                    <td>{{ form.invoice_status }}</td>
                </tr>
                <tr>
                    <td>{% for error in form.customer_id.errors %}<span style="color: red;">[{{ error }}]</span>{% endfor %}</td>
                    <td>{% for error in form.job_type.errors %}<span style="color: red;">[{{ error }}]</span>{% endfor %}</td>
                    <td>{% for error in form.job_status.errors %}<span style="color: red;">[{{ error }}]</span>{% endfor %}</td>
                    <td>{% for error in form.invoice_status.errors %}<span style="color: red;">[{{ error }}]</span>{% endfor %}</td>
                </tr>
            </table>
                <p>{{ form.job_notes.label }}<br>{{ form.job_notes(size=32) }}</p>
                <p>{% for error in form.job_notes.errors %}<span style="color: red;">[{{ error }}]</span>{% endfor %}</p>
                <p>{{ form.submit() }}</p>
    
            
        </form>
    </div>
</div>

<div class="title-card">
    <h3 class="title-card"> Job ID: {{ job.id }} - Items </h3>

    <div class="title-card">
        <table class="table table-striped table-card">
            <tr>
                <th>Item ID</th>
                <th>Item Name</th>
                <th>Item Description</th>
                <th>Item Quantity</th>
                <th>Item Cost</th>
                <th>Total Cost</th>
                <th>Actions</th>
            </tr>
            {% for item in items %}
            <tr>
                <td>{{ item.id }}</td>
                <td>{{ item.item_name }}</td>
                <td>{{ item.item_description }}</td>
                <td>{{ item.item_quantity }}</td>
                <td>{{ item.item_cost }}</td>
                <td>{{ item.item_quantity * item.item_cost }}</td>
                <td>
                    <a class="btn btn-primary" href="{{ url_for('edit_job_item', job_id=job.id, item_id=item.id) }} ">Edit &raquo;</a>
                    <a class="btn btn-danger" href="{{ url_for('delete_job_item', job_id=job.id, item_id=item.id) }} ">Delete &raquo;</a>
                </td>

            </tr>
            {% endfor %}
        </table>

        <a class="btn btn-primary" href="{{ url_for('add_job_item', job_id=job.id) }} ">Add Item &raquo;</a>

    </div>
</div>





<div>
    <a class="btn btn-primary" href="{{ url_for('view_job', job_id=job.id) }} ">View Job &raquo;</a>
    <a class="btn btn-danger" href="{{ url_for('delete_job', job_id=job.id) }} ">Delete Job &raquo;</a>
</div>

{% endblock %}
